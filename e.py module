[1mdiff --git a/database.py b/database.py[m
[1mnew file mode 100644[m
[1mindex 0000000..dfd1e02[m
[1m--- /dev/null[m
[1m+++ b/database.py[m
[36m@@ -0,0 +1,28 @@[m
[32m+[m[32m"""[m
[32m+[m[32m数据库连接和会话管理[m
[32m+[m[32m"""[m
[32m+[m[32mfrom sqlalchemy import create_engine[m
[32m+[m[32mfrom sqlalchemy.orm import sessionmaker[m
[32m+[m[32mfrom config import settings[m
[32m+[m
[32m+[m[32m# 创建数据库引擎[m
[32m+[m[32mengine = create_engine([m
[32m+[m[32m    settings.database_url,[m
[32m+[m[32m    connect_args={"check_same_thread": False}  # SQLite特定参数[m
[32m+[m[32m)[m
[32m+[m
[32m+[m[32m# 创建会话工厂[m
[32m+[m[32mSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)[m
[32m+[m
[32m+[m[32mdef get_db():[m
[32m+[m[32m    """获取数据库会话"""[m
[32m+[m[32m    db = SessionLocal()[m
[32m+[m[32m    try:[m
[32m+[m[32m        yield db[m
[32m+[m[32m    finally:[m
[32m+[m[32m        db.close()[m
[32m+[m
[32m+[m[32mdef create_tables():[m
[32m+[m[32m    """创建数据库表"""[m
[32m+[m[32m    from models import Base[m
[32m+[m[32m    Base.metadata.create_all(bind=engine)[m
